<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title></title>
	<style type="text/css">
		* {
			margin: 0;
			padding: 0;
		}

		ul {
			list-style: none;
		}

		.slider {
			width: 700px;
			height: 250px;
			position: relative;
			overflow: hidden;
		}

		.slider .list {
			position: absolute;
		}

		.slider .list .item {
			width: 700px;
			height: 250px;
			float: left;
		}

		.slider .list .item img {
			width: 700px;
			height: 250px;
			display: block;
			;

		}

		.slider .prev,
		.slider .next {
			position: absolute;
			top: 150px;
			background-color: #0000FF;
		}

		.slider .next {
			right: 0px;
		}

		.slider .pagination .bullet {
			width: 20px;
			height: 20px;
			background-color: black;
			margin-left: 5px;
			top: 200px;
			z-index: 999;
			/* 重叠显示的最高优先级 */
			position: relative;
			float: left;
			cursor: pointer;

		}

		.focus {
			background-color: yellow !important;
		}
	</style>
	<script src="animate.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>
	<div class="slider">
		<ul class="list">
			<li class="item"><img src="../img/Snipaste_2020-09-21_17-03-17.png" alt=""></li>
			<li class="item"><img src="../img/Snipaste_2020-09-21_17-03-36.png" alt=""></li>
			<li class="item"><img src="../img/Snipaste_2020-09-21_17-03-47.png" alt=""></li>
			<li class="item"><img src="../img/Snipaste_2020-09-21_17-03-56.png" alt=""></li>
		</ul>
		<button class="prev">prev</button>
		<button class="next">next</button>
		<ul class="pagination">
			<li class="bullet focus"></li>
			<li class="bullet"></li>
			<li class="bullet"></li>
			<li class="bullet"></li>
		</ul>
	</div>
	<script type="text/javascript">
		var currindex;
		var lis;
		var liwidth;
		var len;
		init();

		function init() {
			currindex = 1;
			var li_1 = document.querySelector('.slider .list .item:first-of-type'); //选择到第一个li结点
			var copy_1 = li_1.cloneNode(true); //包括内容一起克隆了
			var li_last = document.querySelector('.slider .list .item:last-of-type'); //选择到最后一个li结点
			var copy_last = li_last.cloneNode(true);

			var list = document.querySelector('.slider .list');
			list.appendChild(copy_1);
			list.insertBefore(copy_last, li_1); //在ul中添加新的li
			//先变结构
			lis = document.querySelectorAll('.list .item');
			liwidth = lis[0].offsetWidth; //包括padding 内容和border
			len = lis.length;

			list.style.width = liwidth * len + "px" //让其变宽足以容纳所有的li

			document.querySelector('.prev').onclick = function () {
				sliderpre();
			}
			document.querySelector('.next').onclick = function () {
				slidernext();
			}
			//添加点击的时间函数
		}

		function slidernext() {
			currindex++;
			sliderto(currindex);
		}

		function sliderpre() {
			currindex--;
			sliderto(currindex);
		}

		function sliderto(index) {
			var list = document.querySelector('.slider .list');
			//处理第一个照片和最后一个照片
			if (index === len) {
				currindex = index = 2;
				list.style.left = -liwidth + 'px'; //可见区域的宽
			}

			if (index == -1) {
				currindex = index = len - 3;
				list.style.left = (len - 2) * liwidth + 'px';
			}
				//如果是第一张图,一旦选择左移,就要立刻瞬间切换到第张图的位置,在进行下面的移动


			//下面统一根据index进行处理
			var focusindex;
			var bullets = document.querySelectorAll('.pagination .bullet')
			//获取所有的子弹
			if (index === 0) {
				focusindex = bullets.length - 1;
			} else if (index === len - 1) {
				focusindex = 0;
			} else {
				focusindex = index - 1;
			}

			document.querySelector('.focus').className = 'bullet'
			bullets[focusindex].className = 'bullet focus'; //增添样式
			//得到所有的子弹结点

			var left = -index * liwidth; //左移移的长度

			animate(list, {
				left: left
			})
			//js自带的动画
		}
		var bullets = document.querySelectorAll('.slider .pagination .bullet');
		for (var i = 0; i < bullets.length; i++) {
			bullets[i].index = i;
			bullets[i].onclick = function () {
				currindex = this.index + 1;
				sliderto(currindex);
			}
		}
		//为所有的子弹添加点击事件
		var id;

		function auto() {
			clearInterval(id);
			id = setInterval(function () {
				slidernext();
			}, 2000);
		}

		function stop() {
			clearInterval(id);
		}
		document.querySelector('.slider').onmouseover = function () {
			stop();

		}
		document.querySelector('.slider').onmouseout = function () {
			auto();
		}

		auto();
	</script>

</body>

</html>