<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<script type="text/javascript">
		
		</script>
	</head>
	<body>
		<button type="button">first blood</button>
		<button type="button">double kill</button>
		<script type="text/javascript">
		//通知者模式、上帝模式
			function Message(){
				this.list = [];
				this.mag = 'hello';
			}
			//
			Message.prototype.attach = function (hero){
				this.list.push(hero);
				//list维护一个英雄列表
			}
			Message.prototype.notify = function(){
				for(var i of this.list){
					i.update();
				}
			}
			Message.prototype.setState = function(msg){
				this.msg = msg;
				this.notify();
			}
			Message.prototype.getState = function(){
				return this.msg
			}

			
			function Hero(name,msg){
				this.name = name;
				this.msg = msg;
			}
			Hero.prototype.update = function(){
				console.log(this.name + 'receive'+this.msg.getState())
			}
			var msg = new Message();
			var hz = new Hero('黄忠',msg);
			var zy = new Hero('周瑜',msg);
			var lb = new Hero('吕布',msg);
			msg.attach(hz)//添加被观察者列表
			msg.attach(zy)
			msg.attach(lb)
			
			document.querySelector('button:first-of-type').onclick = function(){
				msg.setState('first blood')
			}
			document.querySelector('button:last-of-type').onclick = function(){
				msg.setState('double kill')
			}
		</script>
	</body>
</html>
